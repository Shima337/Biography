# Тестирование извлечения людей

## Как использовать

### 1. Подготовка тестовых сообщений

Отредактируйте файл `test_messages.json` и добавьте свои тестовые сообщения:

```json
{
  "messages": [
    {
      "id": 1,
      "text": "Ваше сообщение здесь",
      "expected_persons": [
        {"name": "Имя человека", "type": "family|friend|colleague|romance|other"}
      ],
      "notes": "Описание того, что проверяется"
    }
  ]
}
```

**Поля:**
- `id` - уникальный номер сообщения
- `text` - текст сообщения для тестирования
- `expected_persons` - массив ожидаемых людей с их типами
- `notes` - описание теста (опционально)

### 2. Запуск тестов

```bash
cd backend
python tests/test_person_extraction.py
```

### 3. Просмотр результатов

Отчет будет сохранен в `tests/reports/person_extraction_report_YYYY-MM-DD_HH-MM.md`

## Что проверяется

- Правильность извлечения людей (Pipeline v1 и v2)
- Объединение вариантов имен (например, "Тася" и "Таиса Владимировна")
- Пропущенные люди
- Лишние люди
- Правильность типов людей

## Метрики

- **Precision** - сколько из найденных людей правильные
- **Recall** - сколько из ожидаемых людей найдено
- **F1 Score** - среднее гармоническое precision и recall
